# Copyright (C) 2025 Intel Corporation
# SPDX-License-Identifier: Apache-2.0

FROM alpine:3.22

RUN apk update && \
    apk upgrade && \
    apk add --no-cache bash jq lscpu pciutils procps && \
    rm -rf /var/cache/apk/*

COPY image/validation /

WORKDIR /

ENV USER=validation
ENV UID=65432
ENV GID=65432
RUN addgroup -g "${GID}" "${USER}" && \
    adduser -D -h "$(pwd)" -G "${USER}" -u "${UID}" -s /bin/sh "${USER}"
USER "${USER}"

CMD ["/run.sh"]

HEALTHCHECK NONE
